{"ast":null,"code":"const useProductService = () => {\n  const _apiBase = 'http://127.0.0.1:3003/api/products';\n\n  // GET ALL PRODUCTS\n  const getAllProducts = async () => {\n    try {\n      const response = await fetch(_apiBase);\n      const products = await response.json();\n      if (!products.success) return [];\n      return products.data.map(product => _transformProduct(product));\n    } catch (error) {\n      console.error('Mahsulotlarni olishda xatolik:', error);\n      return [];\n    }\n  };\n\n  // GET ONE PRODUCT\n  const getDetailedProduct = async id => {\n    try {\n      const response = await fetch(`${_apiBase}/${id}`);\n      const product = await response.json();\n      if (!product.success) return null;\n      return _transformProduct(product.data);\n    } catch (error) {\n      console.error('Mahsulotni olishda xatolik:', error);\n      return null;\n    }\n  };\n\n  // GET RELATED PRODUCTS\n  const getRelatedProduct = async id => {\n    try {\n      const response = await fetch(`${_apiBase}/${id}/related`);\n      const products = await response.json();\n      if (!products.success) return [];\n      return products.data.map(product => _transformProduct(product));\n    } catch (error) {\n      console.error('Related mahsulotlarni olishda xatolik:', error);\n      return [];\n    }\n  };\n\n  // POST PRODUCT\n  const postProduct = async productObject => {\n    try {\n      const response = await fetch(_apiBase, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(productObject)\n      });\n      const product = await response.json();\n      if (!product.success) return null;\n      return _transformProduct(product.data);\n    } catch (error) {\n      console.error('POST product error:', error);\n      return null;\n    }\n  };\n\n  // PUT PRODUCT (UPDATE)\n  const putProduct = async (id, updatedData) => {\n    try {\n      const response = await fetch(`${_apiBase}/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updatedData)\n      });\n      const result = await response.json();\n      if (!result.success) {\n        console.error('PUT failed:', result.message);\n        return null;\n      }\n      return _transformProduct(result.data);\n    } catch (error) {\n      console.error('PUT product error:', error);\n      return null;\n    }\n  };\n\n  // DELETE PRODUCT\n  const deleteProduct = async id => {\n    try {\n      const response = await fetch(`${_apiBase}/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const product = await response.json();\n      if (!product.success) {\n        console.error('Delete failed:', product.message);\n        return false;\n      }\n      return true;\n    } catch (error) {\n      console.error('Delete error:', error);\n      return false;\n    }\n  };\n\n  // CREATE ORDER\n  const createOrder = async orderData => {\n    try {\n      const response = await fetch('http://127.0.0.1:3003/api/orders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(orderData)\n      });\n      const result = await response.json();\n      return result;\n    } catch (error) {\n      console.error('Create order error:', error);\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  };\n\n  // TRANSFORM FUNCTION\n  const _transformProduct = product => {\n    var _product$images;\n    return {\n      id: product._id,\n      name: product.name,\n      price: product.price,\n      old_price: product.old_price,\n      category: product.category,\n      images: product.images,\n      image: ((_product$images = product.images) === null || _product$images === void 0 ? void 0 : _product$images[0]) || product.image || '',\n      status: product.status,\n      rating: product.rating,\n      colors: product.colors,\n      dimensions: product.dimensions,\n      description: product.description,\n      createdAt: product.createdAt\n    };\n  };\n  return {\n    getAllProducts,\n    getDetailedProduct,\n    getRelatedProduct,\n    postProduct,\n    deleteProduct,\n    putProduct,\n    createOrder\n  };\n};\nexport default useProductService;","map":{"version":3,"names":["useProductService","_apiBase","getAllProducts","response","fetch","products","json","success","data","map","product","_transformProduct","error","console","getDetailedProduct","id","getRelatedProduct","postProduct","productObject","method","headers","body","JSON","stringify","putProduct","updatedData","result","message","deleteProduct","createOrder","orderData","_product$images","_id","name","price","old_price","category","images","image","status","rating","colors","dimensions","description","createdAt"],"sources":["C:/0.new shopping website/lux/luxe/client/src/server/server.js"],"sourcesContent":["const useProductService = () => {\r\n\tconst _apiBase = 'http://127.0.0.1:3003/api/products'\r\n\r\n\t// GET ALL PRODUCTS\r\n\tconst getAllProducts = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(_apiBase)\r\n\t\t\tconst products = await response.json()\r\n\r\n\t\t\tif (!products.success) return []\r\n\r\n\t\t\treturn products.data.map(product => _transformProduct(product))\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Mahsulotlarni olishda xatolik:', error)\r\n\t\t\treturn []\r\n\t\t}\r\n\t}\r\n\r\n\t// GET ONE PRODUCT\r\n\tconst getDetailedProduct = async id => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${_apiBase}/${id}`)\r\n\t\t\tconst product = await response.json()\r\n\r\n\t\t\tif (!product.success) return null\r\n\r\n\t\t\treturn _transformProduct(product.data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Mahsulotni olishda xatolik:', error)\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\t// GET RELATED PRODUCTS\r\n\tconst getRelatedProduct = async id => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${_apiBase}/${id}/related`)\r\n\t\t\tconst products = await response.json()\r\n\r\n\t\t\tif (!products.success) return []\r\n\r\n\t\t\treturn products.data.map(product => _transformProduct(product))\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Related mahsulotlarni olishda xatolik:', error)\r\n\t\t\treturn []\r\n\t\t}\r\n\t}\r\n\r\n\t// POST PRODUCT\r\n\tconst postProduct = async productObject => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(_apiBase, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify(productObject),\r\n\t\t\t})\r\n\r\n\t\t\tconst product = await response.json()\r\n\r\n\t\t\tif (!product.success) return null\r\n\r\n\t\t\treturn _transformProduct(product.data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('POST product error:', error)\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\t// PUT PRODUCT (UPDATE)\r\n\tconst putProduct = async (id, updatedData) => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${_apiBase}/${id}`, {\r\n\t\t\t\tmethod: 'PUT',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify(updatedData),\r\n\t\t\t})\r\n\r\n\t\t\tconst result = await response.json()\r\n\r\n\t\t\tif (!result.success) {\r\n\t\t\t\tconsole.error('PUT failed:', result.message)\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\r\n\t\t\treturn _transformProduct(result.data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('PUT product error:', error)\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\t// DELETE PRODUCT\r\n\tconst deleteProduct = async id => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`${_apiBase}/${id}`, {\r\n\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t})\r\n\r\n\t\t\tconst product = await response.json()\r\n\r\n\t\t\tif (!product.success) {\r\n\t\t\t\tconsole.error('Delete failed:', product.message)\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\treturn true\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Delete error:', error)\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\t// CREATE ORDER\r\n\tconst createOrder = async (orderData) => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch('http://127.0.0.1:3003/api/orders', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify(orderData)\r\n\t\t\t});\r\n\t\t\tconst result = await response.json();\r\n\t\t\treturn result;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Create order error:', error);\r\n\t\t\treturn { success: false, message: error.message };\r\n\t\t}\r\n\t};\r\n\r\n\t// TRANSFORM FUNCTION\r\n\tconst _transformProduct = product => {\r\n\t\treturn {\r\n\t\t\tid: product._id,\r\n\t\t\tname: product.name,\r\n\t\t\tprice: product.price,\r\n\t\t\told_price: product.old_price,\r\n\t\t\tcategory: product.category,\r\n\t\t\timages: product.images,\r\n\t\t\timage: product.images?.[0] || product.image || '',\r\n\t\t\tstatus: product.status,\r\n\t\t\trating: product.rating,\r\n\t\t\tcolors: product.colors,\r\n\t\t\tdimensions: product.dimensions,\r\n\t\t\tdescription: product.description,\r\n\t\t\tcreatedAt: product.createdAt,\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetAllProducts,\r\n\t\tgetDetailedProduct,\r\n\t\tgetRelatedProduct,\r\n\t\tpostProduct,\r\n\t\tdeleteProduct,\r\n\t\tputProduct,\r\n\t\tcreateOrder,\r\n\t}\r\n}\r\n\r\nexport default useProductService\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}