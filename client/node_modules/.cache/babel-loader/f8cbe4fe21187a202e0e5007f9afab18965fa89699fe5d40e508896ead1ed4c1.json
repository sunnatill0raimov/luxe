{"ast":null,"code":"var _jsxFileName = \"/Users/rayimovsunnatillo/Desktop/luxe-shop/client/src/contexts/ProductContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport useProductService from '../server/server';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  products: [],\n  isLoading: true\n};\nconst productReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_PRODUCTS':\n      return {\n        ...state,\n        products: action.payload,\n        isLoading: false\n      };\n    case 'ADD_PRODUCT':\n      return {\n        ...state,\n        products: [...state.products, action.payload]\n      };\n    case 'UPDATE_PRODUCT':\n      const updatedProducts = state.products.map(p => p.id === action.payload.id ? action.payload : p);\n      return {\n        ...state,\n        products: updatedProducts\n      };\n    case 'DELETE_PRODUCT':\n      const filteredProducts = state.products.filter(p => p.id !== action.payload);\n      return {\n        ...state,\n        products: filteredProducts\n      };\n    default:\n      return state;\n  }\n};\nconst ProductContext = /*#__PURE__*/createContext();\nexport const ProductProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(productReducer, initialState);\n  const {\n    getAllProducts,\n    postProduct,\n    putProduct,\n    deleteProduct\n  } = useProductService();\n  useEffect(() => {\n    const loadProducts = async () => {\n      dispatch({\n        type: 'SET_PRODUCTS',\n        payload: []\n      });\n      const backendProducts = await getAllProducts();\n      if (backendProducts.length === 0) {\n        // Fallback to static if backend empty\n        try {\n          const defaultProducts = await import('../data/products');\n          const allStaticProducts = [...defaultProducts.newCollectionProducts, ...defaultProducts.bestsellerProducts];\n          dispatch({\n            type: 'SET_PRODUCTS',\n            payload: allStaticProducts\n          });\n        } catch (error) {\n          dispatch({\n            type: 'SET_PRODUCTS',\n            payload: []\n          });\n        }\n      } else {\n        dispatch({\n          type: 'SET_PRODUCTS',\n          payload: backendProducts\n        });\n      }\n    };\n    loadProducts();\n  }, []);\n  const getProducts = () => state.products;\n  const getNewCollectionProducts = () => state.products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)).slice(0, 4);\n  const getBestsellerProducts = () => state.products.sort((a, b) => a.price - b.price).slice(0, 4);\n  const getProduct = id => state.products.find(p => p.id === id);\n  const addProduct = async productData => {\n    const newProduct = await postProduct(productData);\n    if (newProduct) {\n      dispatch({\n        type: 'ADD_PRODUCT',\n        payload: newProduct\n      });\n    }\n    return newProduct;\n  };\n  const updateProduct = async (id, productData) => {\n    const updated = await putProduct(id, productData);\n    if (updated) {\n      dispatch({\n        type: 'UPDATE_PRODUCT',\n        payload: updated\n      });\n    }\n    return updated;\n  };\n  const removeProduct = async id => {\n    const success = await deleteProduct(id);\n    if (success) {\n      dispatch({\n        type: 'DELETE_PRODUCT',\n        payload: id\n      });\n    }\n    return success;\n  };\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: {\n      products: state.products,\n      isLoading: state.isLoading,\n      getProducts,\n      getNewCollectionProducts,\n      getBestsellerProducts,\n      getProduct,\n      addProduct,\n      updateProduct,\n      removeProduct\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductProvider, \"K0i02uxFdClQh4iund6XgRtJ9Lo=\", false, function () {\n  return [useProductService];\n});\n_c = ProductProvider;\nexport const useProducts = () => {\n  _s2();\n  const context = useContext(ProductContext);\n  if (!context) {\n    throw new Error('useProducts must be used within a ProductProvider');\n  }\n  return context;\n};\n_s2(useProducts, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"ProductProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","useProductService","jsxDEV","_jsxDEV","initialState","products","isLoading","productReducer","state","action","type","payload","updatedProducts","map","p","id","filteredProducts","filter","ProductContext","ProductProvider","children","_s","dispatch","getAllProducts","postProduct","putProduct","deleteProduct","loadProducts","backendProducts","length","defaultProducts","allStaticProducts","newCollectionProducts","bestsellerProducts","error","getProducts","getNewCollectionProducts","sort","a","b","Date","createdAt","slice","getBestsellerProducts","price","getProduct","find","addProduct","productData","newProduct","updateProduct","updated","removeProduct","success","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useProducts","_s2","context","Error","$RefreshReg$"],"sources":["/Users/rayimovsunnatillo/Desktop/luxe-shop/client/src/contexts/ProductContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport useProductService from '../server/server';\n\nconst initialState = {\n  products: [],\n  isLoading: true,\n};\n\nconst productReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_PRODUCTS':\n      return {\n        ...state,\n        products: action.payload,\n        isLoading: false,\n      };\n    case 'ADD_PRODUCT':\n      return {\n        ...state,\n        products: [...state.products, action.payload],\n      };\n    case 'UPDATE_PRODUCT':\n      const updatedProducts = state.products.map((p) =>\n        p.id === action.payload.id ? action.payload : p\n      );\n      return {\n        ...state,\n        products: updatedProducts,\n      };\n    case 'DELETE_PRODUCT':\n      const filteredProducts = state.products.filter((p) => p.id !== action.payload);\n      return {\n        ...state,\n        products: filteredProducts,\n      };\n    default:\n      return state;\n  }\n};\n\nconst ProductContext = createContext();\n\nexport const ProductProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(productReducer, initialState);\n  const { getAllProducts, postProduct, putProduct, deleteProduct } = useProductService();\n\n  useEffect(() => {\n    const loadProducts = async () => {\n      dispatch({ type: 'SET_PRODUCTS', payload: [] });\n\n      const backendProducts = await getAllProducts();\n\n      if (backendProducts.length === 0) {\n        // Fallback to static if backend empty\n        try {\n          const defaultProducts = await import('../data/products');\n          const allStaticProducts = [\n            ...defaultProducts.newCollectionProducts,\n            ...defaultProducts.bestsellerProducts,\n          ];\n          dispatch({ type: 'SET_PRODUCTS', payload: allStaticProducts });\n        } catch (error) {\n          dispatch({ type: 'SET_PRODUCTS', payload: [] });\n        }\n      } else {\n        dispatch({ type: 'SET_PRODUCTS', payload: backendProducts });\n      }\n    };\n\n    loadProducts();\n  }, []);\n\n  const getProducts = () => state.products;\n\n  const getNewCollectionProducts = () =>\n    state.products\n      .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\n      .slice(0, 4);\n\n  const getBestsellerProducts = () =>\n    state.products\n      .sort((a, b) => a.price - b.price)\n      .slice(0, 4);\n\n  const getProduct = (id) => state.products.find((p) => p.id === id);\n\n  const addProduct = async (productData) => {\n    const newProduct = await postProduct(productData);\n    if (newProduct) {\n      dispatch({ type: 'ADD_PRODUCT', payload: newProduct });\n    }\n    return newProduct;\n  };\n\n  const updateProduct = async (id, productData) => {\n    const updated = await putProduct(id, productData);\n    if (updated) {\n      dispatch({ type: 'UPDATE_PRODUCT', payload: updated });\n    }\n    return updated;\n  };\n\n  const removeProduct = async (id) => {\n    const success = await deleteProduct(id);\n    if (success) {\n      dispatch({ type: 'DELETE_PRODUCT', payload: id });\n    }\n    return success;\n  };\n\n  return (\n    <ProductContext.Provider\n      value={{\n        products: state.products,\n        isLoading: state.isLoading,\n        getProducts,\n        getNewCollectionProducts,\n        getBestsellerProducts,\n        getProduct,\n        addProduct,\n        updateProduct,\n        removeProduct,\n      }}\n    >\n      {children}\n    </ProductContext.Provider>\n  );\n};\n\nexport const useProducts = () => {\n  const context = useContext(ProductContext);\n  if (!context) {\n    throw new Error('useProducts must be used within a ProductProvider');\n  }\n  return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}