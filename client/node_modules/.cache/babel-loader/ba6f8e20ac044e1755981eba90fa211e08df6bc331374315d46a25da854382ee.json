{"ast":null,"code":"var _jsxFileName = \"C:\\\\0.new shopping website\\\\lux\\\\luxe\\\\client\\\\src\\\\contexts\\\\ProductContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport useProductService from '../server/server';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  products: [],\n  isLoading: true\n};\nconst productReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_PRODUCTS':\n      return {\n        ...state,\n        products: action.payload,\n        isLoading: false\n      };\n    case 'ADD_PRODUCT':\n      return {\n        ...state,\n        products: [...state.products, action.payload]\n      };\n    case 'UPDATE_PRODUCT':\n      const updatedProducts = state.products.map(p => p.id === action.payload.id ? action.payload : p);\n      return {\n        ...state,\n        products: updatedProducts\n      };\n    case 'DELETE_PRODUCT':\n      const filteredProducts = state.products.filter(p => p.id !== action.payload);\n      return {\n        ...state,\n        products: filteredProducts\n      };\n    default:\n      return state;\n  }\n};\nconst ProductContext = /*#__PURE__*/createContext();\nexport const ProductProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(productReducer, initialState);\n  const {\n    getAllProducts,\n    postProduct,\n    putProduct,\n    deleteProduct\n  } = useProductService();\n  useEffect(() => {\n    const loadProducts = async () => {\n      dispatch({\n        type: 'SET_PRODUCTS',\n        payload: []\n      });\n      const backendProducts = await getAllProducts();\n      dispatch({\n        type: 'SET_PRODUCTS',\n        payload: backendProducts\n      });\n    };\n    loadProducts();\n  }, []);\n  const getProducts = () => state.products;\n  const getNewCollectionProducts = () => state.products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)).slice(0, 4);\n  const getBestsellerProducts = () => state.products.sort((a, b) => a.price - b.price).slice(0, 4);\n  const getProduct = id => state.products.find(p => p.id === id);\n  const addProduct = async productData => {\n    const newProduct = await postProduct(productData);\n    if (newProduct) {\n      dispatch({\n        type: 'ADD_PRODUCT',\n        payload: newProduct\n      });\n    }\n    return newProduct;\n  };\n  const updateProduct = async (id, productData) => {\n    const updated = await putProduct(id, productData);\n    if (updated) {\n      dispatch({\n        type: 'UPDATE_PRODUCT',\n        payload: updated\n      });\n    }\n    return updated;\n  };\n  const removeProduct = async id => {\n    const success = await deleteProduct(id);\n    if (success) {\n      dispatch({\n        type: 'DELETE_PRODUCT',\n        payload: id\n      });\n    }\n    return success;\n  };\n  return /*#__PURE__*/_jsxDEV(ProductContext.Provider, {\n    value: {\n      products: state.products,\n      isLoading: state.isLoading,\n      getProducts,\n      getNewCollectionProducts,\n      getBestsellerProducts,\n      getProduct,\n      addProduct,\n      updateProduct,\n      removeProduct\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductProvider, \"K0i02uxFdClQh4iund6XgRtJ9Lo=\", false, function () {\n  return [useProductService];\n});\n_c = ProductProvider;\nexport const useProducts = () => {\n  _s2();\n  const context = useContext(ProductContext);\n  if (!context) {\n    throw new Error('useProducts must be used within a ProductProvider');\n  }\n  return context;\n};\n_s2(useProducts, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"ProductProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","useProductService","jsxDEV","_jsxDEV","initialState","products","isLoading","productReducer","state","action","type","payload","updatedProducts","map","p","id","filteredProducts","filter","ProductContext","ProductProvider","children","_s","dispatch","getAllProducts","postProduct","putProduct","deleteProduct","loadProducts","backendProducts","getProducts","getNewCollectionProducts","sort","a","b","Date","createdAt","slice","getBestsellerProducts","price","getProduct","find","addProduct","productData","newProduct","updateProduct","updated","removeProduct","success","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useProducts","_s2","context","Error","$RefreshReg$"],"sources":["C:/0.new shopping website/lux/luxe/client/src/contexts/ProductContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport useProductService from '../server/server';\r\n\r\nconst initialState = {\r\n  products: [],\r\n  isLoading: true,\r\n};\r\n\r\nconst productReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'SET_PRODUCTS':\r\n      return {\r\n        ...state,\r\n        products: action.payload,\r\n        isLoading: false,\r\n      };\r\n    case 'ADD_PRODUCT':\r\n      return {\r\n        ...state,\r\n        products: [...state.products, action.payload],\r\n      };\r\n    case 'UPDATE_PRODUCT':\r\n      const updatedProducts = state.products.map((p) =>\r\n        p.id === action.payload.id ? action.payload : p\r\n      );\r\n      return {\r\n        ...state,\r\n        products: updatedProducts,\r\n      };\r\n    case 'DELETE_PRODUCT':\r\n      const filteredProducts = state.products.filter((p) => p.id !== action.payload);\r\n      return {\r\n        ...state,\r\n        products: filteredProducts,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst ProductContext = createContext();\r\n\r\nexport const ProductProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(productReducer, initialState);\r\n  const { getAllProducts, postProduct, putProduct, deleteProduct } = useProductService();\r\n\r\n  useEffect(() => {\r\n    const loadProducts = async () => {\r\n      dispatch({ type: 'SET_PRODUCTS', payload: [] });\r\n\r\n      const backendProducts = await getAllProducts();\r\n\r\n      dispatch({ type: 'SET_PRODUCTS', payload: backendProducts });\r\n    };\r\n\r\n    loadProducts();\r\n  }, []);\r\n\r\n  const getProducts = () => state.products;\r\n\r\n  const getNewCollectionProducts = () =>\r\n    state.products\r\n      .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\r\n      .slice(0, 4);\r\n\r\n  const getBestsellerProducts = () =>\r\n    state.products\r\n      .sort((a, b) => a.price - b.price)\r\n      .slice(0, 4);\r\n\r\n  const getProduct = (id) => state.products.find((p) => p.id === id);\r\n\r\n  const addProduct = async (productData) => {\r\n    const newProduct = await postProduct(productData);\r\n    if (newProduct) {\r\n      dispatch({ type: 'ADD_PRODUCT', payload: newProduct });\r\n    }\r\n    return newProduct;\r\n  };\r\n\r\n  const updateProduct = async (id, productData) => {\r\n    const updated = await putProduct(id, productData);\r\n    if (updated) {\r\n      dispatch({ type: 'UPDATE_PRODUCT', payload: updated });\r\n    }\r\n    return updated;\r\n  };\r\n\r\n  const removeProduct = async (id) => {\r\n    const success = await deleteProduct(id);\r\n    if (success) {\r\n      dispatch({ type: 'DELETE_PRODUCT', payload: id });\r\n    }\r\n    return success;\r\n  };\r\n\r\n  return (\r\n    <ProductContext.Provider\r\n      value={{\r\n        products: state.products,\r\n        isLoading: state.isLoading,\r\n        getProducts,\r\n        getNewCollectionProducts,\r\n        getBestsellerProducts,\r\n        getProduct,\r\n        addProduct,\r\n        updateProduct,\r\n        removeProduct,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProductContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProducts = () => {\r\n  const context = useContext(ProductContext);\r\n  if (!context) {\r\n    throw new Error('useProducts must be used within a ProductProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}